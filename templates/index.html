{% extends "base.html" %}

{% block title %}Kura - Kurssien Arvostelut{% endblock %}

{% block content %}
<main class="site-main">
  <section class="section courses-section">
    <h2 class="section-title">Yhteisön suorittamia kursseja</h2>
    {% if courses %}
      <ul class="course-list">
        {% for course in courses %}
          <li class="course-item">
            <a class="user-link" href="/user/{{ course.user_id }}">{{ course.username }}</a>
            suoritti kurssin:
            <a class="course-link" href="/course/{{ course.id }}">{{ course.code }} {{ course.name }} ({{ course.credits }} op)</a>
          </li>
        {% endfor %}
      </ul>
      
      <div class="pagination">
        {% if c_page > 1 %}
          <a href="/c/1/r/{{ r_page }}">Alkuun</a>
          <a href="/c/{{ c_page - 1 }}/r/{{ r_page }}">Edellinen</a>
        {% endif %}
        
        <span>Sivu {{ c_page }} / {{ c_pages }}</span>
        
        {% if c_page < c_pages %}
          <a href="/c/{{ c_page + 1 }}/r/{{ r_page }}">Seuraava</a>
          <a href="/c/{{ c_pages }}/r/{{ r_page }}">Loppuun</a>
        {% endif %}
      </div>
      
    {% else %}
      <p class="empty-state">Ei lisättyjä kursseja</p>
    {% endif %}
  </section>

  <section class="section reviews-section">
    <h2 class="section-title">Yhteisön lisäämiä arvosteluja kursseista</h2>
    {% if reviews %}
      <ul class="review-list">
        {% for review in reviews %}
          <li class="review-item">
            <a class="user-link" href="/user/{{ review.user_id }}">{{ review.reviewer_name }}</a>
            antoi kurssille
            <a class="review-link" href="/course/{{ review.course_id }}/show_review">
              {{ review.course_name }}
              {{ "★" * (review.rating | int) }}{{ "☆" * (5 - (review.rating | int)) }}
            </a>
          </li>
        {% endfor %}
      </ul>

      <div class="pagination">
        {% if r_page > 1 %}
          <a href="/c/{{ c_page }}/r/1">Alkuun</a>
          <a href="/c/{{ c_page }}/r/{{ r_page - 1 }}">Edellinen</a>
        {% endif %}
        
        <span>Sivu {{ r_page }} / {{ r_pages }}</span>
        
        {% if r_page < r_pages %}
          <a href="/c/{{ c_page }}/r/{{ r_page + 1 }}">Seuraava</a>
          <a href="/c/{{ c_page }}/r/{{ r_pages }}">Loppuun</a>
        {% endif %}
      </div>


    {% else %}
      <p class="empty-state">Ei vielä arvosteluja kursseista</p>
    {% endif %}
  </section>
</main>
{% endblock %}