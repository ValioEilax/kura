<!DOCTYPE html>
<html>
  <head>
    <title>{{ review.course_name }} - arvostelu</title>
  </head>
  <body>
    <h1>Käyttäjän {{ review.reviewer_name }} arvostelu kurssista {{ review.course_name }}</h1>

    {%- for message in get_flashed_messages() -%}
      <p><b>{{ message }}</b></p>
    {%- endfor -%}

    {% if session.user_id == review.user_id %}
    <p>
      <a href="/edit_review/{{ review.id }}">Muokkaa arvostelua</a>
      <a href="/remove_review/{{ review.id }}">Poista arvostelu</a>
    </p>
    {% endif %}

      <p><strong>Vaikeustaso:</strong> {{ review.difficulty }}</p>
      <p><strong>Käytetty aika viikossa:</strong> {{ review.workload }}</p>
      <p><strong>Arvosana:</strong> {{ review.rating }}</p>
      <p><strong>Palaute:</strong> {{ review.feedback }}</p>
      <p>
        <a href="/course/{{ review.course_id }}">Takaisin kurssisivulle</a>
        <a href="/">Takaisin etusivulle</a>
      </p>
    </p>

    <hr>
    <h3>Kommentit</h3>

    {% for comment in comments %}
      <div style="border-bottom: 1px solid #eee; margin-bottom: 10px; padding-bottom: 5px;">
        <strong>{{ comment.username }}</strong> 
        <small style="color: gray;">({{ comment.created_at }})</small>
        <p>{{ comment.content }}</p>
      </div>
    {% else %}
      <p>Ei vielä kommentteja. Ole ensimmäinen!</p>
    {% endfor %}

    <hr>

    <h4>Lisää kommentti</h4>
    <form action="/review/{{ review.id }}/comment" method="post">
      <p>
        <textarea name="content" rows="3" cols="40" required placeholder="Kirjoita tähän..."></textarea>
      </p>
      <button type="submit">Lähetä kommentti</button>
    </form>

  </body>
</html>