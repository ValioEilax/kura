{% extends "base.html" %}

{% block title %}Muokkaa kurssia – Kura{% endblock %}

{% block content %}
  <h2>Muokkaa kurssia</h2>

  {% for message in get_flashed_messages() %}
    <p><strong>{{ message }}</strong></p>
  {% endfor %}

  <form action="/update_course" method="post">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    <p>
      <label for="name">Kurssin nimi:</label><br>
      <input id="name" type="text" name="name" size="48" required value="{{ course.name }}">
    </p>

    <p>
      <label for="code">Kurssin koodi:</label><br>
      <input id="code" type="text" name="code" size="16" required value="{{ course.code }}">
    </p>

    <p>
      <label for="grade">Saatu arvosana (0–5):</label><br>
      <input id="grade" type="number" name="grade" min="0" max="5" required value="{{ course.grade }}">
    </p>

    <p>
      <label for="credits">Opintopisteet:</label><br>
      <input id="credits" type="number" name="credits" min="0" required value="{{ course.credits }}"> op
    </p>

    {% for class in all_classes %}
      <p>
        {{ class }}: <br />
        <select name="classes">
          <option value="">(Valitse suoritustapa)</option>
        {% for option in all_classes[class] %}
          {% if classes[class] == option %}
          <option value="{{ class }}:{{ option }}" selected>{{ option }}</option>
          {% else %}
          <option value="{{ class }}:{{ option }}">{{ option }}</option>
          {% endif %}
        {% endfor %}
        </select>
      </p>
      {% endfor %}

    <input type="hidden" name="course_id" value="{{ course.id }}">

    <p>
      <button type="submit">Päivitä kurssia</button>
    </p>
  </form>

  <p><a href="/course/{{ course.id }}">Peruuta</a></p>
{% endblock %}
